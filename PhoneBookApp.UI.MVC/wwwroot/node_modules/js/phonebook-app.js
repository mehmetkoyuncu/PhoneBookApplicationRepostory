


$(document).ready(function () {

    $.ajax({
        type: "GET",
        url: "https://localhost:44351/person/GetAllPerson",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            $("#tablo").DataTable({

                data: data,
                "columns": [
                    { data: "name", "autoWidth": true },
                    { data: "surname", "autoWidth": true },
                    { data: "companyName", "autoWidth": true },

                    //{
                    //    mRender: function (data, type, row) {
                    //        return '<a href="#" class="table-edit" data-id="Id" onclick="Edit(' + id.text + ')">EDIT</a> / <a href="#" class="editor_remove" onclick="Delete(' + row.Id + ')">Delete</a>'
                    //    }
                    //}
                    {
                        "render": function (data, type, row) {
                            return "<a href='#' class='btn btn-primary' data-toggle='modal' data-target='#exampleModal' onclick=ViewContact('" + row.id + "'); >İncele</a>"
                            //return "<a class='btn btn-primary text-light' id='" + row.id + "'><i class=\"fas fa-eye viewItem\"></i>İncele</a>";
                        }
                    },
                    {
                        "render": function (data, type, row) {
                            //return "<a class='btn btn-danger text-light' onclick="myFunction(row.id)" id='" + row.id + "'><i class=\"far fa-trash-alt deletedItem\"></i>Sil</a>";
                            return "<a  class='btn btn-danger text-light' onclick=DeletePerson('" + row.id + "'); >Sil</a>";
                        }
                    }
                ]

            });
        }
    });
  
});
$(".reloadContact").click(function () {
    window.location.reload();
});
function DeleteContact(id) {
    var Id = Number(id);
    debugger;
    $.ajax({

        type: "POST",
        url: "https://localhost:44351/contact/RemoveContact",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ "Id": Id }),
        success: function (data) {
            alert(data);
            console.log("ready!");
        }
    });
}
function ViewContact(id) {
    debugger;
    $.ajax({
        type: "POST",
        url: "https://localhost:44351/contact/GetContactForUser",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ 'userid': id }),
        success: function (data) {
            $("#tableContact").DataTable({
                data: data,
                "columns": [
                    { data: "personName", "autoWidth": true },
                    { data: "phoneNum" },
                    { data: "mail", "autoWidth": true },
                    { data: "address", "autoWidth": true },

                    {
                        "render": function (data, type, row) {
                            //return "<a class='btn btn-danger text-light' onclick="myFunction(row.id)" id='" + row.id + "'><i class=\"far fa-trash-alt deletedItem\"></i>Sil</a>";
                            return "<a href='#' class='btn btn-danger' onclick=DeleteContact('" + row.id + "'); >Delete</a>";
                        }
                    }
                ]

            });
            document.getElementById('personIdHide').innerHTML = id;
            debugger;
        }
    });


}
function AddContact() {
    var Mail = $('#mail').val();
    var PhoneNum = $('#phoneNum').val();
    var Address = $('#addresss').val();
    debugger;
    var UserId = document.getElementById("personIdHide").innerHTML;
    debugger;
    $.ajax({
        type: "POST",
        url: "https://localhost:44351/contact/addcontact",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ 'PhoneNum': PhoneNum, 'Address': Address, 'Mail': Mail, 'UserId': UserId }),
        success: function (data) {
            alert(data);
            console.log("ready!");
            window.location.reload();
        }
    });

}
function AddPerson() {
    var Name = $('#addName').val();
    var Surname = $('#addSurname').val();
    var CompanyName = $('#addCompanyname').val();
    debugger;
    $.ajax({
        type: "POST",
        url: "https://localhost:44351/person/addperson",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ 'Name': Name, 'Surname': Surname, 'CompanyName': CompanyName }),
        success: function (data) {
            alert(data);
            console.log("ready!");
            window.location.reload();
        }
    });
}
function DeletePerson(id) {
    debugger;
    $.ajax({
        type: "POST",
        url: "https://localhost:44351/person/removeperson",
        datatype: "json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify({ 'id': id }),
        success: function (data) {
            alert(data);
            console.log("ready!");
            window.location.reload();
        }
    });
}



   
   







